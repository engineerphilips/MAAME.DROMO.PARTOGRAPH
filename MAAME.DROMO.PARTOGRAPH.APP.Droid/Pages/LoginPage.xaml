<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             x:Class="MAAME.DROMO.PARTOGRAPH.APP.Droid.Pages.LoginPage"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:sf="clr-namespace:Syncfusion.Maui.Toolkit.TextInputLayout;assembly=Syncfusion.Maui.Toolkit"
             xmlns:controls="clr-namespace:MAAME.DROMO.PARTOGRAPH.APP.Droid.Pages.Controls"
             xmlns:pagemodel="clr-namespace:MAAME.DROMO.PARTOGRAPH.APP.Droid.PageModels"
             xmlns:fonts="clr-namespace:Fonts"
             xmlns:converters="clr-namespace:MAAME.DROMO.PARTOGRAPH.APP.Droid.Converters"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#121212}">

    <!--mc:Ignorable="d"
             d:BindingContext="{d:DesignInstance pagemodel:LoginPageModel}"-->
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:PasswordIconConverter x:Key="PasswordIconConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid>
        <Grid.Background>
            <LinearGradientBrush EndPoint="0,1">
                <GradientStop Color="{AppThemeBinding Light=#E3F2FD, Dark=#0D47A1}" Offset="0.0" />
                <GradientStop Color="{AppThemeBinding Light=#BBDEFB, Dark=#1565C0}" Offset="1.0" />
            </LinearGradientBrush>
        </Grid.Background>

        <ScrollView>
            <VerticalStackLayout Padding="30" Spacing="20" VerticalOptions="Center">

                <!-- Logo Section -->
                <Border WidthRequest="100" 
                        HeightRequest="100" 
                        BackgroundColor="White"
                        HorizontalOptions="Center">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="50" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Radius="10" Opacity="0.3" />
                    </Border.Shadow>
                    <Label Text="&#xE95E;" 
                           FontFamily="{x:Static fonts:FluentUI.FontFamily}"
                           FontSize="50"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                </Border>

                <!-- App Title -->
                <VerticalStackLayout HorizontalOptions="Center" Spacing="5">
                    <Label Text="Maame.Dromo" 
                           FontSize="32" 
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="Center" />
                    <Label Text="Enhancing Maternal Deliveries in Ghana" 
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=#666, Dark=#B0BEC5}"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>

                <!-- Login Form -->
                <Border StrokeThickness="0"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                        Padding="25"
                        Margin="0,20,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Radius="15" Opacity="0.2" />
                    </Border.Shadow>

                    <VerticalStackLayout Spacing="20">
                        <Label Text="Sign In"
                               FontSize="26"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"
                               HorizontalOptions="Center" />

                        <!-- Email/Username Field -->
                        <sf:SfTextInputLayout Hint="Email or Staff ID"
                                              ContainerType="Outlined"
                                              ContainerBackground="Transparent">
                            <sf:SfTextInputLayout.LeadingView>
                                <Label Text="&#xf5be;"
                                       FontFamily="{x:Static fonts:FluentUI.FontFamily}"
                                       FontSize="20"
                                       TextColor="{AppThemeBinding Light=#757575, Dark=#9E9E9E}"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center" />
                            </sf:SfTextInputLayout.LeadingView>
                            <Entry x:Name="EmailEntry"
                                   Text="{Binding Email}"
                                   Keyboard="Email" 
                                   HeightRequest="40" />
                        </sf:SfTextInputLayout>

                        <!-- Password Field -->
                        <sf:SfTextInputLayout Hint="Password"
                                              ContainerType="Outlined"
                                              ContainerBackground="Transparent"
                                              EnablePasswordVisibilityToggle="True">
                            <sf:SfTextInputLayout.LeadingView>
                                <Label Text="&#xe790;"
                                       FontFamily="{x:Static fonts:FluentUI.FontFamily}"
                                       FontSize="20"
                                       TextColor="{AppThemeBinding Light=#757575, Dark=#9E9E9E}"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center" />
                            </sf:SfTextInputLayout.LeadingView>
                            <Entry Text="{Binding Password}"
                                   IsPassword="True"
                                   HeightRequest="40" />
                        </sf:SfTextInputLayout>

                        <!-- Remember Me -->
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <CheckBox Grid.Column="0"
                                      IsChecked="{Binding RememberMe}"
                                      Color="{StaticResource Primary}" />
                            <Label Grid.Column="1"
                                   Text="Remember me"
                                   VerticalOptions="Center"
                                   Margin="5,0,0,0">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding ToggleRememberMeCommand}" />
                                </Label.GestureRecognizers>
                            </Label>
                            <Label Grid.Column="2"
                                   Text="Forgot Password?"
                                   TextColor="{StaticResource Primary}"
                                   TextDecorations="Underline"
                                   VerticalOptions="Center">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}" />
                                </Label.GestureRecognizers>
                            </Label>
                        </Grid>

                        <!-- Error Message -->
                        <Label Text="{Binding ErrorMessage}"
                               TextColor="#EF5350"
                               FontSize="12"
                               HorizontalOptions="Center"
                               IsVisible="{Binding HasError}" />

                        <!-- Login Button -->
                        <!-- Login Button -->
                        <Button Text="LOGIN"
                                Style="{StaticResource PrimaryActionStyle}"
                                Command="{Binding LoginCommand}"
                                Margin="0,10,0,0">
                            <Button.Shadow>
                                <Shadow Brush="{StaticResource Primary}" Offset="0,4" Radius="12" Opacity="0.35" />
                            </Button.Shadow>
                        </Button>

                        <!-- Loading Indicator -->
                        <ActivityIndicator IsRunning="{Binding IsBusy}"
                                          IsVisible="{Binding IsBusy}"
                                          Color="#2196F3"
                                          HorizontalOptions="Center" />

                        <!-- Divider -->
                        <!--<Grid ColumnDefinitions="*,Auto,*" Margin="0,10">
                            <BoxView Grid.Column="0" 
                                     HeightRequest="1" 
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#424242}"
                                     VerticalOptions="Center" />
                            <Label Grid.Column="1" 
                                   Text="OR" 
                                   Margin="10,0"
                                   TextColor="{AppThemeBinding Light=#666, Dark=#AAA}" />
                            <BoxView Grid.Column="2" 
                                     HeightRequest="1" 
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#424242}"
                                     VerticalOptions="Center" />
                        </Grid>-->

                        <!-- Alternative Login -->
                        <!--<Button Text="Staff Portal Login"
                                Command="{Binding StaffLoginCommand}"
                                BackgroundColor="Transparent"
                                TextColor="#2196F3"
                                BorderColor="#2196F3"
                                BorderWidth="1"
                                HeightRequest="50"
                                CornerRadius="10" />-->
                    </VerticalStackLayout>
                </Border>

                <!-- Footer -->
                <VerticalStackLayout Spacing="8" HorizontalOptions="Center" Margin="0,20,0,0">
                    <!-- Made with love in Ghana -->
                    <HorizontalStackLayout Spacing="6" HorizontalOptions="Center">
                        <Label Text="Made with"
                               FontSize="13"
                               TextColor="{AppThemeBinding Light=#666, Dark=#AAA}"
                               VerticalOptions="Center" />
                        <Label Text="â¤ï¸"
                               FontSize="13"
                               VerticalOptions="Center" />
                        <Label Text="in Ghana"
                               FontSize="13"
                               TextColor="{AppThemeBinding Light=#666, Dark=#AAA}"
                               VerticalOptions="Center" />
                        <Label Text="ðŸ‡¬ðŸ‡­"
                               FontSize="16"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <Label Text="Â© 2025 Emperor Software"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light=#888, Dark=#777}"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>