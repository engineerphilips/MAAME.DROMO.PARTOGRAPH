<?xml version="1.0" encoding="utf-8" ?>
<sfPopup:SfPopup AnimationMode='SlideOnTop' xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:sfPopup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
             xmlns:core="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
             xmlns:editors="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
             x:Class="MAAME.DROMO.PARTOGRAPH.APP.Droid.Pages.Modals.BishopScorePopup"
             xmlns:converters="clr-namespace:MAAME.DROMO.PARTOGRAPH.APP.Droid.Converters">

    <sfPopup:SfPopup.Resources>
        <ResourceDictionary>
            <!-- Input Styles -->
            <Style x:Key="PatientInput" TargetType="core:SfTextInputLayout">
                <Setter Property="ContainerType" Value="Outlined" />
                <Setter Property="OutlineCornerRadius" Value="8" />
                <!--<Setter Property="Stroke" Value="{StaticResource BorderLight}" />-->
                <!--<Setter Property="FocusedStroke" Value="{StaticResource PrimaryBlue}" />-->
                <!--<Setter Property="ContainerBackground" Value="{StaticResource SurfaceWhite}" />-->
                <!--<Setter Property="Margin" Value="0,4" />-->
            </Style>

            <!-- Typography Styles -->
            <Style x:Key="HeaderTitle" TargetType="Label">
                <Setter Property="FontSize" Value="24" />
                <Setter Property="FontAttributes" Value="Bold" />
                <!--<Setter Property="TextColor" Value="{StaticResource SurfaceWhite}" />-->
                <Setter Property="HorizontalTextAlignment" Value="Center" />
            </Style>

            <Style x:Key="HeaderSubtitle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="TextColor" Value="#E6FFFFFF" />
                <Setter Property="HorizontalTextAlignment" Value="Center" />
            </Style>

            <!--<Style x:Key="ErrorText" TargetType="Label">
                <Setter Property="FontSize" Value="12" />
                <Setter Property="TextColor" Value="{StaticResource ErrorRed}" />
                <Setter Property="HorizontalTextAlignment" Value="Start" />
            </Style>-->

            <Style x:Key="SectionTitle" TargetType="Label">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="Margin" Value="0,10,0,5" />
            </Style>

            <converters:InitialsConverter x:Key="StringInitialsConverter" />
            <converters:IsNotNullConverter x:Key="IsNotNullConverter" />
            <converters:IsNotNullOrEmptyConverter x:Key="IsNotNullOrEmptyConverter" />
        </ResourceDictionary>

        <!--<x:Static Member="system:DateTime.Today" x:Key="Today" />-->
    </sfPopup:SfPopup.Resources>

    <sfPopup:SfPopup.HeaderTemplate>
        <DataTemplate>
            <StackLayout>
                <Label Text="Bishop Score Assessment" VerticalOptions="Center" Margin="15,15,0,0" />
            </StackLayout>
        </DataTemplate>
    </sfPopup:SfPopup.HeaderTemplate>
    <!--<sfPopup:SfPopup.HeaderTemplate>
        <DataTemplate>
            <StackLayout>
                <Label Text="Bishop Score Assessment"
                       VerticalOptions="Center"
                       FontSize="18"
                       FontAttributes="Bold"
                       Margin="15,15,0,0" />
                <Label Text="Predicts likelihood of successful vaginal delivery"
                       VerticalOptions="Center"
                       FontSize="12"
                       TextColor="Gray"
                       Margin="15,5,0,10" />
            </StackLayout>
        </DataTemplate>
    </sfPopup:SfPopup.HeaderTemplate>-->

    <sfPopup:SfPopup.ContentTemplate>
        <DataTemplate>
            <ScrollView>
                <VerticalStackLayout Padding="15,10" Spacing="5">

                    <!-- Total Score Display -->
                    <Border BackgroundColor="{Binding TotalScoreColor}"
                            StrokeThickness="0"
                            Padding="15"
                            Margin="0,0,0,10">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Bishop Score"
                                   FontSize="14"
                                   HorizontalOptions="Center" />
                            <Label Text="{Binding TotalScore}"
                                   FontSize="32"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center" />
                            <Label Text="{Binding ScoreInterpretation}"
                                   FontSize="12"
                                   HorizontalOptions="Center"
                                   HorizontalTextAlignment="Center" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Cervical Examination Inputs -->
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="4" RowSpacing="4">

                        <!-- Row 0: Dilatation and Effacement -->
                        <core:SfTextInputLayout Grid.Row="0" Grid.Column="0"
                            Hint="Dilatation (cm)"
                            Style="{StaticResource PatientInput}">
                            <editors:SfNumericEntry Value="{Binding DilationCm, Mode=TwoWay}"
                            Minimum="0"
                            Maximum="10"
                            MaximumNumberDecimalDigits="0" />
                        </core:SfTextInputLayout>

                        <core:SfTextInputLayout Grid.Row="0" Grid.Column="1"
    Hint="Effacement (%)"
    Style="{StaticResource PatientInput}">
                            <editors:SfNumericEntry Value="{Binding EffacementPercent, Mode=TwoWay}"
    Minimum="0"
Maximum="100"
MaximumNumberDecimalDigits="0"
Placeholder="0-100%" />
                        </core:SfTextInputLayout>


                        <!-- Row 1: Station and Consistency -->

                        <core:SfTextInputLayout Grid.Row="1" Grid.Column="0"
    Hint="Station"
    Style="{StaticResource PatientInput}">
                            <Picker ItemsSource="{Binding StationOptions}"
                                        SelectedItem="{Binding SelectedStation, Mode=TwoWay}"
                                        VerticalOptions="Center" />
                        </core:SfTextInputLayout>


                        <core:SfTextInputLayout Grid.Row="1" Grid.Column="1"
    Hint="Consistency"
    Style="{StaticResource PatientInput}">
                            <Picker ItemsSource="{Binding ConsistencyOptions}"
                                        SelectedItem="{Binding SelectedConsistency, Mode=TwoWay}"
                                        VerticalOptions="Center" />
                        </core:SfTextInputLayout>

                        <!-- Row 2: Position -->

                        <core:SfTextInputLayout Grid.Row="2" Grid.Column="0"
    Hint="Position"
    Style="{StaticResource PatientInput}">
                            <Picker ItemsSource="{Binding PositionOptions}"
                                        SelectedItem="{Binding SelectedPosition, Mode=TwoWay}"
                                        VerticalOptions="Center" />
                        </core:SfTextInputLayout>
                    </Grid>

                    <!-- Clinical Notes -->
                    <!--<VerticalStackLayout Spacing="5">
                        <Label Text="Clinical Notes (Optional)" Style="{StaticResource SectionTitle}" />
                        <Border BackgroundColor="#F5F5F5"
                                StrokeThickness="1"
                                Stroke="#E0E0E0"
                                Padding="10">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8"/>
                            </Border.StrokeShape>
                            <Editor Text="{Binding Notes}"
                                    Placeholder="Add clinical observations, findings, or plan..."
                                    HeightRequest="80"
                                    BackgroundColor="Transparent" />
                        </Border>
                    </VerticalStackLayout>-->

                    <!-- Action Buttons -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,5,0,20">
                        <Button Grid.Column="0"
                            Text="Cancel"
                            Command="{Binding CancelCommand}"
                            Style="{StaticResource SecondaryActionStyle}" />

                        <Button Grid.Column="1"
                            Text="Save Score"
                            Command="{Binding SaveCommand}"
                            Style="{StaticResource PrimaryActionStyle}" />
                    </Grid>

                </VerticalStackLayout>
            </ScrollView>
        </DataTemplate>
    </sfPopup:SfPopup.ContentTemplate>

</sfPopup:SfPopup>

